import React, { useEffect, useState, useRef } from 'react';
import {
    Box,
    Container,
    Typography,
    Card,
    CardContent,
    CardActions,
    Button,
    Chip,
    Accordion,
    AccordionSummary,
    AccordionDetails,
    Grid,
    useTheme,
    useMediaQuery,
    alpha,
    List,
    ListItem,
    ListItemIcon,
    ListItemText,
    Stack,
    Fab
} from '@mui/material';
import ExpandMoreIcon from '@mui/icons-material/ExpandMore';
import AutoAwesomeIcon from '@mui/icons-material/AutoAwesome';
import RocketLaunchIcon from '@mui/icons-material/RocketLaunch';
import TrendingUpIcon from '@mui/icons-material/TrendingUp';
import CheckCircleIcon from '@mui/icons-material/CheckCircle';
import StarIcon from '@mui/icons-material/Star';
import BoltIcon from '@mui/icons-material/Bolt';
import GroupsIcon from '@mui/icons-material/Groups';
import StoreIcon from '@mui/icons-material/Store';
import SmartphoneIcon from '@mui/icons-material/Smartphone';
import CampaignIcon from '@mui/icons-material/Campaign';
import PsychologyIcon from '@mui/icons-material/Psychology';
import DesignServicesIcon from '@mui/icons-material/DesignServices';
import KeyboardArrowUpIcon from '@mui/icons-material/KeyboardArrowUp';
import KeyboardDoubleArrowRightIcon from '@mui/icons-material/KeyboardDoubleArrowRight';
import ArrowForwardIcon from '@mui/icons-material/ArrowForward';
import ArrowOutwardIcon from '@mui/icons-material/ArrowOutward';
import NorthEastIcon from '@mui/icons-material/NorthEast';
import { motion, useInView, AnimatePresence } from 'framer-motion';

const ServicesPage = () => {
    const [loading, setLoading] = useState(true);
    const [showWelcome, setShowWelcome] = useState(true);
    const [expandedService, setExpandedService] = useState(null);
    const [showScrollTop, setShowScrollTop] = useState(false);
    const [visibleCards, setVisibleCards] = useState([]);
    const theme = useTheme();
    const isMobile = useMediaQuery(theme.breakpoints.down('md'));
    const ref = useRef(null);
    const containerRef = useRef(null);
    const isInView = useInView(ref, { once: true });

    // Scroll to top functionality
    useEffect(() => {
        const handleScroll = () => {
            setShowScrollTop(window.pageYOffset > 400);
        };
        window.addEventListener('scroll', handleScroll);
        return () => window.removeEventListener('scroll', handleScroll);
    }, []);

    useEffect(() => {
        // Initial loading sequence
        const timer1 = setTimeout(() => {
            setLoading(false);
        }, 1800);

        const timer2 = setTimeout(() => {
            setShowWelcome(false);
        }, 3500);

        // Animate cards in sequence
        const timer3 = setTimeout(() => {
            services.forEach((_, index) => {
                setTimeout(() => {
                    setVisibleCards(prev => [...prev, index]);
                }, index * 100);
            });
        }, 4000);

        return () => {
            clearTimeout(timer1);
            clearTimeout(timer2);
            clearTimeout(timer3);
        };
    }, [isInView]);

    const handleServiceExpand = (serviceId) => {
        setExpandedService(expandedService === serviceId ? null : serviceId);
    };

    const scrollToTop = () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
    };

    const services = [
        {
            id: 1,
            title: "AI Marketing Solutions",
            muiIcon: <PsychologyIcon />,
            description: "Smart Growth Starts With Intelligent AI Systems",
            color: "#90caf9", // Light blue
            darkColor: "#000000",
            tagline: "Traditional marketing relies on guesswork. We rely on intelligence.",
            features: [
                "Predict Customer Behavior",
                "Intelligent Targeting & Messaging",
                "Marketing Automation That Thinks",
                "Funnel Optimization With AI",
                "Real-Time Performance Analysis",
                "Predictive Analytics & Insights"
            ],
            benefits: [
                "Data-Driven Decisions – No assumptions, only insights",
                "Higher Conversion Rates – Smarter funnels powered by AI",
                "Cost Efficiency – Reduce ad waste with predictive targeting",
                "Scalable Growth – Systems that grow as your business grows",
                "Real-Time Optimization – Campaigns improve automatically",
                "Future-Proof Strategy – Built for evolving AI & digital trends"
            ],
            idealFor: [
                "SaaS & Tech Companies",
                "E-commerce Brands",
                "Startups & Scaleups",
                "Agencies looking to upgrade with AI",
                "Businesses tired of inconsistent marketing results"
            ],
            stats: "89% faster decision making",
            badge: "Most Popular",
            faqs: [
                { q: "What are AI marketing solutions?", a: "AI marketing solutions use artificial intelligence and machine learning to analyze data, predict customer behavior, automate campaigns, and improve marketing performance." },
                { q: "How do LLMs improve marketing results?", a: "LLMs enhance personalization, automate content and messaging, and optimize communication across channels for better engagement and conversions." }
            ]
        },
        {
            id: 2,
            title: "Performance Marketing",
            muiIcon: <RocketLaunchIcon />,
            description: "AI-Powered Advertising That Delivers Real ROI",
            color: "#ffcdd2", // Light red
            darkColor: "#000000",
            tagline: "Smarter Ads. Faster Growth. Better Results.",
            features: [
                "Google Ads & Meta Ads",
                "LinkedIn & YouTube Ads",
                "AI-Assisted Decision Making",
                "Full-Funnel Performance Strategy",
                "Conversion Tracking & Analytics",
                "ROI Optimization"
            ],
            platforms: ["Google Ads", "Meta Ads", "LinkedIn Ads", "YouTube Ads", "TikTok Ads"],
            stats: "3.5x higher ROI",
            badge: "High ROI"
        },
        {
            id: 3,
            title: "SEO & Growth Strategy",
            muiIcon: <TrendingUpIcon />,
            description: "AI-Driven SEO That Fuels Long-Term Growth",
            color: "#c8e6c9", // Light green
            darkColor: "#000000",
            tagline: "Build Visibility. Drive Traffic. Scale Growth.",
            features: [
                "AI-Powered Keyword Research",
                "Technical SEO Optimization",
                "Content & Topical Authority",
                "Growth-Focused SEO Execution",
                "Backlink Strategy",
                "Local SEO Optimization"
            ],
            stats: "245% more organic traffic",
            badge: "Long-term Growth"
        },
        {
            id: 4,
            title: "Social Media Marketing",
            muiIcon: <CampaignIcon />,
            description: "Build Authority. Earn Attention. Create Trust at Scale.",
            color: "#e1bee7", // Light purple
            darkColor: "#000000",
            tagline: "Attention Is Currency — We Help You Earn It",
            features: [
                "Podcast Strategy & Positioning",
                "Authority-First Content Strategy",
                "Community Building & Engagement",
                "Multi-Platform Content Leverage",
                "Social Media Management",
                "Content Calendar Planning"
            ],
            stats: "78% higher engagement",
            badge: "Authority Building"
        },
        {
            id: 5,
            title: "GMB with AI Model",
            muiIcon: <StoreIcon />,
            description: "Dominate Local Search with AI-Powered Visibility",
            color: "#ffe0b2", // Light orange
            darkColor: "#000000",
            tagline: "Local Businesses Need Visibility Where Buyers Search",
            features: [
                "Complete GMB Optimization",
                "AI-Driven Local Keyword Strategy",
                "Automated Reviews & Engagement",
                "Local Ranking Improvement",
                "Google Maps Optimization",
                "Local Citation Building"
            ],
            stats: "92% more local leads",
            badge: "Local Dominance"
        },
        {
            id: 6,
            title: "Funnel & Automation",
            muiIcon: <BoltIcon />,
            description: "Turn Traffic Into Revenue — Automatically",
            color: "#f8bbd0", // Light pink
            darkColor: "#000000",
            tagline: "Traffic Without a Funnel Is Wasted Money",
            features: [
                "High-Converting Lead Funnels",
                "Sales Automation Workflows",
                "CRM Integrations & Data Syncing",
                "AI-Assisted Funnel Optimization",
                "Email Automation",
                "Lead Scoring Systems"
            ],
            stats: "67% conversion improvement",
            badge: "Automation Experts"
        },
        {
            id: 7,
            title: "Branding & Design",
            muiIcon: <DesignServicesIcon />,
            description: "Design That Builds Recall. Creativity That Drives Growth.",
            color: "#d7ccc8", // Light brown
            darkColor: "#000000",
            tagline: "Growth Needs a Strong Brand Foundation",
            features: [
                "Brand Positioning & Messaging",
                "Visual Identity Systems",
                "Logo Design & Brand Guidelines",
                "Performance-Optimized Assets",
                "UI/UX Design",
                "Marketing Collateral"
            ],
            stats: "3x brand recognition",
            badge: "Creative Excellence"
        },
        {
            id: 8,
            title: "Web & App Development",
            muiIcon: <SmartphoneIcon />,
            description: "Your Digital Salesperson — Built to Convert",
            color: "#cfd8dc", // Light blue grey
            darkColor: "#000000",
            tagline: "Your Website or App Is Your Digital Salesperson",
            features: [
                "High-Conversion Websites",
                "Mobile Apps (Android / iOS)",
                "User-Centric UX/UI Systems",
                "Conversion-Focused Development",
                "Progressive Web Apps",
                "E-commerce Development"
            ],
            stats: "45% faster load times",
            badge: "Tech Excellence"
        }
    ];

    const ServiceCard = ({ service, index }) => (
        <motion.div
            initial={{ opacity: 0, y: 50 }}
            animate={{
                opacity: visibleCards.includes(index) ? 1 : 0,
                y: visibleCards.includes(index) ? 0 : 50,
            }}
            transition={{
                duration: 0.5,
                delay: index * 0.1,
            }}
            whileHover={{
                y: -8,
                transition: { duration: 0.3 }
            }}
        >
            <Card
                sx={{
                    height: '100%',
                    borderRadius: 2,
                    background: '#ffffff',
                    border: '1px solid #e0e0e0',
                    position: 'relative',
                    overflow: 'hidden',
                    cursor: 'pointer',
                    transition: 'all 0.3s ease',
                    boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',
                    '&:hover': {
                        transform: 'translateY(-4px)',
                        boxShadow: '0 4px 12px rgba(0, 0, 0, 0.1)',
                        borderColor: service.color,
                    }
                }}
                onClick={() => handleServiceExpand(service.id)}
            >
                {service.badge && (
                    <Box sx={{
                        position: 'absolute',
                        top: 12,
                        right: 12,
                        zIndex: 2
                    }}>
                        <Chip
                            label={service.badge}
                            size="small"
                            sx={{
                                background: service.color,
                                color: '#000000',
                                fontWeight: 600,
                                fontSize: '0.7rem',
                                '& .MuiChip-label': {
                                    px: 1
                                }
                            }}
                        />
                    </Box>
                )}

                <CardContent sx={{ p: 3 }}>
                    <Box sx={{
                        display: 'flex',
                        alignItems: 'center',
                        mb: 2,
                    }}>
                        <Box sx={{
                            display: 'flex',
                            alignItems: 'center',
                            justifyContent: 'center',
                            width: 50,
                            height: 50,
                            borderRadius: '12px',
                            background: alpha(service.color, 0.3),
                            mr: 2,
                            color: '#000000',
                            border: `1px solid ${alpha(service.color, 0.4)}`,
                        }}>
                            {service.muiIcon}
                        </Box>
                        <Box sx={{ flex: 1 }}>
                            <Typography variant="h6" sx={{
                                fontWeight: 700,
                                color: '#000000',
                                fontSize: '1rem',
                                lineHeight: 1.3
                            }}>
                                {service.title}
                            </Typography>
                            {service.stats && (
                                <Typography variant="caption" sx={{
                                    display: 'block',
                                    color: '#4caf50',
                                    fontWeight: 500,
                                    mt: 0.5
                                }}>
                                    ↑ {service.stats}
                                </Typography>
                            )}
                        </Box>
                    </Box>

                    <Typography variant="body2" color="text.secondary" sx={{
                        mb: 2,
                        minHeight: 40,
                        fontSize: '0.875rem',
                        lineHeight: 1.5,
                        color: '#666666'
                    }}>
                        {service.description}
                    </Typography>

                    <Box>
                        {service.features.slice(0, 3).map((feature, idx) => (
                            <Box key={idx} sx={{
                                display: 'flex',
                                alignItems: 'center',
                                mb: 1.5,
                            }}>
                                <Box sx={{
                                    width: 20,
                                    height: 20,
                                    borderRadius: '50%',
                                    background: alpha(service.color, 0.2),
                                    display: 'flex',
                                    alignItems: 'center',
                                    justifyContent: 'center',
                                    mr: 1.5,
                                    color: '#000000'
                                }}>
                                    <CheckCircleIcon sx={{
                                        fontSize: 12,
                                    }} />
                                </Box>
                                <Typography variant="body2" sx={{
                                    fontSize: '0.8rem',
                                    fontWeight: 400,
                                    color: '#333333'
                                }}>
                                    {feature}
                                </Typography>
                            </Box>
                        ))}
                        {service.features.length > 3 && (
                            <Typography variant="caption" sx={{
                                color: '#000000',
                                fontWeight: 500,
                                display: 'flex',
                                alignItems: 'center',
                                mt: 1.5,
                                cursor: 'pointer',
                            }}>
                                <KeyboardDoubleArrowRightIcon sx={{ fontSize: 14, mr: 0.5 }} />
                                +{service.features.length - 3} more features
                            </Typography>
                        )}
                    </Box>
                </CardContent>

                <CardActions sx={{ p: 3, pt: 0 }}>
                    <Button
                        fullWidth
                        variant="outlined"
                        sx={{
                            borderRadius: 2,
                            borderColor: service.color,
                            color: '#000000',
                            fontWeight: 600,
                            py: 1,
                            fontSize: '0.875rem',
                            '&:hover': {
                                background: alpha(service.color, 0.2),
                                borderColor: '#000000',
                                color: '#000000',
                            }
                        }}
                        onClick={(e) => {
                            e.stopPropagation();
                            handleServiceExpand(service.id);
                        }}
                        endIcon={<ArrowOutwardIcon sx={{ fontSize: 16 }} />}
                    >
                        {expandedService === service.id ? 'Show Less' : 'Explore Service'}
                    </Button>
                </CardActions>
            </Card>
        </motion.div>
    );

    const ServiceDetailAccordion = ({ service }) => (
        <motion.div
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.5 }}
        >
            <Accordion
                expanded={expandedService === service.id}
                onChange={() => handleServiceExpand(service.id)}
                sx={{
                    background: '#ffffff',
                    borderRadius: '12px !important',
                    mb: 2,
                    '&:before': { display: 'none' },
                    border: `1px solid ${alpha('#e0e0e0', 0.5)}`,
                    overflow: 'hidden',
                    boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',
                }}
            >
                <AccordionSummary
                    expandIcon={
                        <ExpandMoreIcon sx={{
                            color: '#000000',
                        }} />
                    }
                    sx={{
                        background: '#ffffff',
                        color: '#000000',
                        borderRadius: expandedService === service.id ? '12px 12px 0 0' : '12px',
                        minHeight: '70px !important',
                        padding: '0 20px',
                        '& .MuiAccordionSummary-content': {
                            alignItems: 'center',
                            gap: 2,
                            margin: '12px 0 !important'
                        },
                        '&:hover': {
                            background: alpha(service.color, 0.1),
                        }
                    }}
                >
                    <Box sx={{
                        display: 'flex',
                        alignItems: 'center',
                        justifyContent: 'center',
                        width: 40,
                        height: 40,
                        borderRadius: '8px',
                        background: alpha(service.color, 0.3),
                        border: `1px solid ${alpha(service.color, 0.4)}`,
                        color: '#000000'
                    }}>
                        {service.muiIcon}
                    </Box>
                    <Box sx={{ flex: 1 }}>
                        <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, mb: 0.5 }}>
                            <Typography variant="h6" sx={{
                                fontWeight: 700,
                                fontSize: '1.1rem',
                                color: '#000000'
                            }}>
                                {service.title}
                            </Typography>
                            {service.badge && (
                                <Chip
                                    label={service.badge}
                                    size="small"
                                    sx={{
                                        background: alpha(service.color, 0.3),
                                        color: '#000000',
                                        fontWeight: 600,
                                        border: `1px solid ${alpha(service.color, 0.4)}`,
                                        fontSize: '0.7rem'
                                    }}
                                />
                            )}
                        </Box>
                        <Typography variant="body2" sx={{
                            fontSize: '0.9rem',
                            color: '#666666'
                        }}>
                            {service.description}
                        </Typography>
                    </Box>
                </AccordionSummary>
                <AccordionDetails sx={{
                    background: '#ffffff',
                    p: { xs: 2, md: 3 },
                }}>
                    <Box sx={{ mb: 3 }}>
                        <Typography variant="h6" sx={{
                            mb: 2,
                            fontWeight: 600,
                            color: '#000000',
                            fontSize: { xs: '1.1rem', md: '1.2rem' },
                        }}>
                            {service.tagline}
                        </Typography>
                        <Typography variant="body2" color="text.secondary" paragraph sx={{
                            fontSize: '0.95rem',
                            lineHeight: 1.6,
                            mb: 2,
                            color: '#333333'
                        }}>
                            {service.id === 1 ? "At AI Growth Exa, we build AI & LLM-powered marketing frameworks that help brands grow faster, smarter, and more predictably." :
                                `At AI Growth Exa, we combine strategy, technology, and creativity to deliver measurable results for ${service.title.toLowerCase()}.`}
                        </Typography>
                    </Box>

                    <Grid container spacing={3} sx={{ mb: 3 }}>
                        <Grid item xs={12} md={6}>
                            <Box sx={{
                                background: '#fafafa',
                                borderRadius: 2,
                                p: 2.5,
                                border: `1px solid ${alpha('#e0e0e0', 0.5)}`,
                            }}>
                                <Typography variant="subtitle1" sx={{
                                    mb: 2,
                                    fontWeight: 600,
                                    display: 'flex',
                                    alignItems: 'center',
                                    gap: 1,
                                    color: '#000000',
                                }}>
                                    <AutoAwesomeIcon sx={{ fontSize: 18, color: '#000000' }} />
                                    What We Offer
                                </Typography>
                                <List dense disablePadding>
                                    {service.features.map((feature, idx) => (
                                        <ListItem key={idx} sx={{
                                            px: 0,
                                            py: 1,
                                            borderBottom: idx < service.features.length - 1 ? `1px solid ${alpha('#e0e0e0', 0.2)}` : 'none'
                                        }}>
                                            <ListItemIcon sx={{ minWidth: 32 }}>
                                                <Box sx={{
                                                    width: 20,
                                                    height: 20,
                                                    borderRadius: '50%',
                                                    background: alpha(service.color, 0.2),
                                                    display: 'flex',
                                                    alignItems: 'center',
                                                    justifyContent: 'center',
                                                    color: '#000000'
                                                }}>
                                                    <CheckCircleIcon sx={{ fontSize: 12 }} />
                                                </Box>
                                            </ListItemIcon>
                                            <ListItemText
                                                primary={feature}
                                                primaryTypographyProps={{
                                                    fontWeight: 400,
                                                    fontSize: '0.85rem',
                                                    color: '#000000'
                                                }}
                                            />
                                        </ListItem>
                                    ))}
                                </List>

                                {service.platforms && (
                                    <Box sx={{ mt: 2.5 }}>
                                        <Typography variant="subtitle2" sx={{ mb: 1, fontWeight: 600, color: '#000000' }}>
                                            Platforms We Specialize In
                                        </Typography>
                                        <Stack direction="row" spacing={1} flexWrap="wrap" useFlexGap>
                                            {service.platforms.map((platform, idx) => (
                                                <Chip
                                                    key={idx}
                                                    label={platform}
                                                    size="small"
                                                    sx={{
                                                        background: alpha(service.color, 0.2),
                                                        border: `1px solid ${alpha(service.color, 0.3)}`,
                                                        color: '#000000',
                                                        fontWeight: 400,
                                                        mb: 0.5,
                                                        mr: 0.5,
                                                        fontSize: '0.7rem'
                                                    }}
                                                />
                                            ))}
                                        </Stack>
                                    </Box>
                                )}
                            </Box>
                        </Grid>

                        <Grid item xs={12} md={6}>
                            <Box sx={{
                                background: '#fafafa',
                                borderRadius: 2,
                                p: 2.5,
                                border: `1px solid ${alpha('#e0e0e0', 0.5)}`,
                            }}>
                                {service.benefits && (
                                    <>
                                        <Typography variant="subtitle1" sx={{
                                            mb: 2,
                                            fontWeight: 600,
                                            display: 'flex',
                                            alignItems: 'center',
                                            gap: 1,
                                            color: '#000000',
                                        }}>
                                            <StarIcon sx={{ fontSize: 18, color: '#000000' }} />
                                            Benefits You Get
                                        </Typography>
                                        <List dense disablePadding>
                                            {service.benefits.map((benefit, idx) => (
                                                <ListItem key={idx} sx={{
                                                    px: 0,
                                                    py: 1,
                                                    borderBottom: idx < service.benefits.length - 1 ? `1px solid ${alpha('#e0e0e0', 0.2)}` : 'none'
                                                }}>
                                                    <ListItemIcon sx={{ minWidth: 32 }}>
                                                        <Box sx={{
                                                            width: 20,
                                                            height: 20,
                                                            borderRadius: '50%',
                                                            background: alpha(service.color, 0.2),
                                                            display: 'flex',
                                                            alignItems: 'center',
                                                            justifyContent: 'center',
                                                            color: '#000000'
                                                        }}>
                                                            <TrendingUpIcon sx={{ fontSize: 12 }} />
                                                        </Box>
                                                    </ListItemIcon>
                                                    <ListItemText
                                                        primary={benefit}
                                                        primaryTypographyProps={{
                                                            fontWeight: 400,
                                                            fontSize: '0.85rem',
                                                            color: '#000000'
                                                        }}
                                                    />
                                                </ListItem>
                                            ))}
                                        </List>
                                    </>
                                )}

                                {service.idealFor && (
                                    <Box sx={{ mt: 2.5 }}>
                                        <Typography variant="subtitle1" sx={{
                                            mb: 1,
                                            fontWeight: 600,
                                            display: 'flex',
                                            alignItems: 'center',
                                            gap: 1,
                                            color: '#000000',
                                        }}>
                                            <GroupsIcon sx={{ fontSize: 18, color: '#000000' }} />
                                            Who This Service Is Best For
                                        </Typography>
                                        <Stack direction="row" spacing={1} flexWrap="wrap" useFlexGap>
                                            {service.idealFor.map((item, idx) => (
                                                <Chip
                                                    key={idx}
                                                    label={item}
                                                    size="small"
                                                    variant="outlined"
                                                    sx={{
                                                        mb: 0.5,
                                                        mr: 0.5,
                                                        borderColor: alpha(service.color, 0.4),
                                                        color: '#000000',
                                                        fontWeight: 400,
                                                        fontSize: '0.7rem'
                                                    }}
                                                />
                                            ))}
                                        </Stack>
                                    </Box>
                                )}
                            </Box>
                        </Grid>
                    </Grid>

                    {service.faqs && (
                        <Box sx={{
                            mt: 4,
                            pt: 3,
                            borderTop: `1px solid ${alpha('#e0e0e0', 0.5)}`,
                        }}>
                            <Typography variant="h6" sx={{
                                mb: 3,
                                fontWeight: 600,
                                textAlign: 'center',
                                color: '#000000',
                            }}>
                                Frequently Asked Questions
                            </Typography>
                            <Grid container spacing={2}>
                                {service.faqs.map((faq, idx) => (
                                    <Grid item xs={12} md={6} key={idx}>
                                        <Box sx={{
                                            p: 2,
                                            borderRadius: 1,
                                            background: '#fafafa',
                                            border: `1px solid ${alpha('#e0e0e0', 0.5)}`,
                                            height: '100%',
                                        }}>
                                            <Typography variant="subtitle2" sx={{
                                                fontWeight: 600,
                                                mb: 1,
                                                color: '#000000',
                                            }}>
                                                {faq.q}
                                            </Typography>
                                            <Typography variant="body2" sx={{
                                                lineHeight: 1.5,
                                                color: '#333333',
                                                fontSize: '0.85rem'
                                            }}>
                                                {faq.a}
                                            </Typography>
                                        </Box>
                                    </Grid>
                                ))}
                            </Grid>
                        </Box>
                    )}

                    <Box sx={{
                        mt: 4,
                        textAlign: 'center',
                    }}>
                        <Button
                            variant="contained"
                            size="large"
                            sx={{
                                px: 4,
                                py: 1.5,
                                borderRadius: 2,
                                background: service.color,
                                fontWeight: 600,
                                fontSize: '0.95rem',
                                color: '#000000',
                                '&:hover': {
                                    background: alpha(service.color, 0.8),
                                }
                            }}
                            endIcon={
                                <ArrowForwardIcon sx={{ fontSize: 18, color: '#000000' }} />
                            }
                        >
                            Start with {service.title.split(' ')[0]}
                        </Button>
                        <Typography variant="caption" sx={{
                            display: 'block',
                            mt: 1.5,
                            color: '#666666',
                            fontWeight: 400,
                        }}>
                            Get a free strategy session worth $500
                        </Typography>
                    </Box>
                </AccordionDetails>
            </Accordion>
        </motion.div>
    );

    const PhilosophySection = () => (
        <motion.div
            initial={{ opacity: 0, y: 50 }}
            whileInView={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.6 }}
            viewport={{ once: true, amount: 0.3 }}
        >
            <Box
                sx={{
                    py: { xs: 4, md: 5 },
                    background: '#fafafa',
                    borderRadius: 2,
                    my: 5,
                    position: 'relative',
                    overflow: 'hidden',
                    border: '1px solid #e0e0e0'
                }}
            >
                <Container maxWidth="lg">
                    <Box>
                        <Typography
                            variant="h5"
                            align="center"
                            sx={{
                                mb: 3,
                                fontWeight: 700,
                                color: '#000000',
                                fontSize: { xs: '1.5rem', md: '1.8rem' }
                            }}
                        >
                            Our Core Philosophy
                        </Typography>

                        <Typography
                            variant="h6"
                            align="center"
                            sx={{
                                mb: 3,
                                maxWidth: 800,
                                mx: 'auto',
                                fontStyle: 'italic',
                                color: '#90caf9',
                                fontSize: { xs: '1.1rem', md: '1.3rem' },
                                fontWeight: 400,
                                lineHeight: 1.4
                            }}
                        >
                            "Most agencies focus on activities. We focus on outcomes."
                        </Typography>

                        <Typography
                            variant="body1"
                            align="center"
                            sx={{
                                mb: 4,
                                maxWidth: 900,
                                mx: 'auto',
                                fontSize: '0.95rem',
                                lineHeight: 1.6,
                                color: '#333333'
                            }}
                        >
                            At AI Growth Exa, we don't offer random services. We build complete growth ecosystems where AI,
                            performance marketing, automation, and creativity work together. Whether your goal is leads,
                            sales, brand authority, or scaling, we design the system around your business not templates.
                        </Typography>

                        <Grid container spacing={2} sx={{ mt: 1 }}>
                            {[
                                {
                                    icon: <AutoAwesomeIcon />,
                                    title: "AI-driven",
                                    desc: "Leveraging artificial intelligence for smarter decisions",
                                    color: "#90caf9"
                                },
                                {
                                    icon: <TrendingUpIcon />,
                                    title: "ROI-focused",
                                    desc: "Every strategy measured by return on investment",
                                    color: "#ffcdd2"
                                },
                                {
                                    icon: <RocketLaunchIcon />,
                                    title: "Designed to scale",
                                    desc: "Growth systems that expand with your business",
                                    color: "#c8e6c9"
                                },
                                {
                                    icon: <GroupsIcon />,
                                    title: "Integrated journeys",
                                    desc: "Seamless customer experiences across all touchpoints",
                                    color: "#e1bee7"
                                }
                            ].map((item, index) => (
                                <Grid item xs={12} sm={6} md={3} key={index}>
                                    <Box sx={{
                                        textAlign: 'center',
                                        p: 2,
                                        borderRadius: 2,
                                        background: '#ffffff',
                                        height: '100%',
                                        border: '1px solid #e0e0e0',
                                        boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',
                                    }}>
                                        <Box sx={{
                                            display: 'inline-flex',
                                            p: 1.5,
                                            borderRadius: '12px',
                                            background: alpha(item.color, 0.3),
                                            color: '#000000',
                                            mb: 1.5,
                                            border: `1px solid ${alpha(item.color, 0.4)}`,
                                        }}>
                                            {item.icon}
                                        </Box>
                                        <Typography variant="subtitle1" sx={{
                                            fontWeight: 600,
                                            mb: 1,
                                            color: '#000000',
                                        }}>
                                            {item.title}
                                        </Typography>
                                        <Typography variant="body2" sx={{
                                            color: '#666666',
                                            fontSize: '0.85rem'
                                        }}>
                                            {item.desc}
                                        </Typography>
                                    </Box>
                                </Grid>
                            ))}
                        </Grid>
                    </Box>
                </Container>
            </Box>
        </motion.div>
    );

    const LoadingScreen = () => (
        <Box sx={{
            display: 'flex',
            flexDirection: 'column',
            alignItems: 'center',
            justifyContent: 'center',
            minHeight: '100vh',
            background: '#ffffff',
            position: 'fixed',
            top: 0,
            left: 0,
            right: 0,
            bottom: 0,
            zIndex: 9999,
            overflow: 'hidden'
        }}>
            <motion.div
                animate={{
                    rotate: 360,
                }}
                transition={{
                    rotate: { duration: 3, repeat: Infinity, ease: "linear" },
                }}
                style={{ marginBottom: 30 }}
            >
                <AutoAwesomeIcon sx={{ fontSize: 60, color: '#90caf9' }} />
            </motion.div>

            <Typography
                variant="h5"
                align="center"
                sx={{
                    fontWeight: 700,
                    color: '#000000',
                    mb: 1
                }}
            >
                AI Growth Exa
            </Typography>

            <Typography
                variant="body2"
                sx={{
                    color: '#666666',
                }}
            >
                Loading Services...
            </Typography>
        </Box>
    );

    const WelcomeScreen = () => (
        <motion.div
            initial={{ opacity: 1 }}
            animate={{ opacity: 0 }}
            transition={{ delay: 2, duration: 0.5 }}
            style={{
                position: 'fixed',
                top: 0,
                left: 0,
                right: 0,
                bottom: 0,
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                background: '#ffffff',
                zIndex: 9998
            }}
        >
            <div style={{ textAlign: 'center' }}>
                <AutoAwesomeIcon sx={{ fontSize: 60, color: '#90caf9', mb: 3 }} />
                <Typography
                    variant="h4"
                    align="center"
                    sx={{
                        fontWeight: 700,
                        color: '#000000',
                        fontSize: { xs: '1.8rem', md: '2.5rem' }
                    }}
                >
                    Welcome to AI Growth Exa
                </Typography>
                <Typography
                    variant="h6"
                    sx={{
                        mt: 2,
                        color: '#666666',
                        fontWeight: 400
                    }}
                >
                    Building Intelligent Growth Systems
                </Typography>
            </div>
        </motion.div>
    );

    if (loading) {
        return <LoadingScreen />;
    }

    return (
        <Box sx={{
            minHeight: '100vh',
            background: '#ffffff',
            position: 'relative',
            pt: '64px',
        }}>
            <Box>
                {showWelcome && <WelcomeScreen />}

                <AnimatePresence>
                    {showScrollTop && (
                        <motion.div
                            initial={{ opacity: 0, scale: 0.5 }}
                            animate={{ opacity: 1, scale: 1 }}
                            exit={{ opacity: 0, scale: 0.5 }}
                            transition={{ type: "spring", stiffness: 200 }}
                            style={{
                                position: 'fixed',
                                bottom: 24,
                                right: 24,
                                zIndex: 1000
                            }}
                        >
                            <Fab
                                color="primary"
                                aria-label="scroll to top"
                                onClick={scrollToTop}
                                sx={{
                                    background: '#90caf9',
                                    color: '#000000',
                                    '&:hover': {
                                        background: '#ffcdd2',
                                    },
                                    boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',
                                }}
                                size="small"
                            >
                                <KeyboardArrowUpIcon />
                            </Fab>
                        </motion.div>
                    )}
                </AnimatePresence>

                <Container maxWidth="xl" sx={{ py: { xs: 2, md: 3 }, px: { xs: 2, md: 3 } }} ref={containerRef}>
                    {/* Hero Section */}
                    <Box sx={{
                        textAlign: 'center',
                        mb: { xs: 3, md: 5 },
                        position: 'relative'
                    }}>
                        <Typography
                            variant="h4"
                            sx={{
                                fontWeight: 700,
                                mb: 2,
                                fontSize: { xs: '1.8rem', md: '2.5rem' },
                                color: '#000000',
                                lineHeight: 1.2,
                            }}
                        >
                            AI-Powered Marketing Solutions
                        </Typography>

                        <Typography
                            variant="h6"
                            sx={{
                                mb: 3,
                                color: '#666666',
                                maxWidth: 800,
                                mx: 'auto',
                                fontSize: { xs: '1rem', md: '1.2rem' },
                                fontWeight: 400,
                                lineHeight: 1.5,
                            }}
                        >
                            Built for Scalable Growth. We don't offer random services.
                            We build complete growth ecosystems.
                        </Typography>

                        <Button
                            variant="contained"
                            size="large"
                            sx={{
                                px: 4,
                                py: 1.5,
                                borderRadius: 2,
                                background: '#90caf9',
                                fontSize: '1rem',
                                fontWeight: 600,
                                color: '#000000',
                                '&:hover': {
                                    background: '#ffcdd2',
                                }
                            }}
                            endIcon={<NorthEastIcon sx={{ color: '#000000' }} />}
                        >
                            Start Your Growth Journey
                        </Button>
                    </Box>

                    <PhilosophySection />

                    {/* Services Grid */}
                    <Box ref={ref} sx={{ mb: { xs: 4, md: 6 } }}>
                        <Typography
                            variant="h5"
                            align="center"
                            sx={{
                                mb: 3,
                                fontWeight: 700,
                                color: '#000000',
                                fontSize: { xs: '1.5rem', md: '1.8rem' }
                            }}
                        >
                            Our Services
                        </Typography>

                        <Typography
                            variant="body1"
                            align="center"
                            sx={{
                                mb: 4,
                                color: '#666666',
                                maxWidth: 800,
                                mx: 'auto',
                                fontSize: '0.95rem',
                                lineHeight: 1.6,
                            }}
                        >
                            Whether your goal is leads, sales, brand authority, or scaling,
                            we design the system around your business — not templates.
                        </Typography>

                        <Grid container spacing={2} justifyContent="center">
                            {services.map((service, index) => (
                                <Grid item xs={12} sm={6} md={4} lg={3} key={service.id}>
                                    <ServiceCard service={service} index={index} />
                                </Grid>
                            ))}
                        </Grid>
                    </Box>

                    {/* Detailed Service Accordions */}
                    <Box sx={{ mt: { xs: 4, md: 6 } }}>
                        <Typography
                            variant="h5"
                            align="center"
                            sx={{
                                mb: 4,
                                fontWeight: 700,
                                color: '#000000',
                                fontSize: { xs: '1.5rem', md: '1.8rem' }
                            }}
                        >
                            Detailed Service Breakdown
                        </Typography>

                        {services.map((service) => (
                            <ServiceDetailAccordion key={service.id} service={service} />
                        ))}
                    </Box>

                    {/* Final CTA */}
                    <Box sx={{ mt: { xs: 6, md: 8 }, mb: 4 }}>
                        <Box sx={{
                            background: '#fafafa',
                            borderRadius: 2,
                            p: { xs: 3, md: 4 },
                            textAlign: 'center',
                            border: '1px solid #e0e0e0',
                        }}>
                            <Typography
                                variant="h5"
                                sx={{
                                    mb: 2,
                                    fontWeight: 700,
                                    color: '#000000',
                                    fontSize: { xs: '1.5rem', md: '1.8rem' }
                                }}
                            >
                                Ready to Scale Your Business?
                            </Typography>

                            <Typography
                                variant="body1"
                                sx={{
                                    mb: 3,
                                    color: '#666666',
                                    maxWidth: 800,
                                    mx: 'auto',
                                    fontSize: '0.95rem',
                                    lineHeight: 1.5
                                }}
                            >
                                Join 500+ businesses that have scaled with our AI-powered growth systems.
                                Get started with a free strategy session today.
                            </Typography>

                            <Box sx={{
                                display: 'flex',
                                gap: 2,
                                justifyContent: 'center',
                                flexWrap: 'wrap'
                            }}>
                                <Button
                                    variant="contained"
                                    size="large"
                                    sx={{
                                        px: 3,
                                        py: 1.5,
                                        borderRadius: 2,
                                        background: '#90caf9',
                                        fontSize: '0.95rem',
                                        fontWeight: 600,
                                        color: '#000000',
                                        minWidth: 180,
                                        '&:hover': {
                                            background: '#ffcdd2',
                                        }
                                    }}
                                >
                                    Book Free Strategy Call
                                </Button>

                                <Button
                                    variant="outlined"
                                    size="large"
                                    sx={{
                                        px: 3,
                                        py: 1.5,
                                        borderRadius: 2,
                                        fontSize: '0.95rem',
                                        fontWeight: 600,
                                        minWidth: 180,
                                        borderColor: '#90caf9',
                                        color: '#000000',
                                        '&:hover': {
                                            background: 'rgba(144, 202, 249, 0.1)',
                                            borderColor: '#ffcdd2',
                                            color: '#000000'
                                        }
                                    }}
                                >
                                    View Case Studies
                                </Button>
                            </Box>

                            <Typography
                                variant="caption"
                                sx={{
                                    display: 'block',
                                    mt: 2,
                                    color: '#666666',
                                    fontWeight: 400,
                                }}
                            >
                                ⚡ Average 3.5x ROI in first 90 days
                            </Typography>
                        </Box>
                    </Box>
                </Container>
            </Box>
        </Box>
    );
};

export default ServicesPage;
